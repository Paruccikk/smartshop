<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Smart Shop</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="css/caixa.css">
    <!-- Meta tag para prevenir zoom e teclado -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
</head>
<body>
<!-- Modal de Login -->
<div id="modalLogin" class="modal">
    <div class="modal-content login-modal">
        <div class="login-header">
            <h2><i class="fas fa-cash-register"></i> Smart Shop</h2>
            <p>Sistema de Caixa</p>
        </div>
        <form id="loginForm" class="login-form">
            <div class="form-group">
                <label for="loginEmail"><i class="fas fa-envelope"></i> Email</label>
                <input type="email" id="loginEmail" required autocomplete="email" class="login-input">
            </div>
            <div class="form-group">
                <label for="loginPassword"><i class="fas fa-lock"></i> Senha</label>
                <input type="password" id="loginPassword" required autocomplete="current-password" class="login-input">
            </div>
            <button type="submit" class="btn-login">
                <i class="fas fa-sign-in-alt"></i> Entrar
            </button>
            <div id="loginError" class="error-message">
                <i class="fas fa-exclamation-triangle"></i>
                <span id="errorText"></span>
            </div>
        </form>
    </div>
</div>

<!-- Conteúdo Principal do Caixa -->
    <div id="caixaContent" class="caixa-container">
        <!-- Header -->
        <header class="caixa-header">
            <div class="header-center">
                <h1 class="sistema-nome">
                    <i class="fas fa-cash-register"></i> Smart Shop
                </h1>
                <div class="loja-info">
                    <span class="loja-nome" id="lojaNome">Nome da Loja</span>
                </div>
            </div>

        <!-- Área Principal -->
        <main class="caixa-main">
            <!-- Produtos -->
            <section class="produtos-section">
                <div id="produtosGrid" class="produtos-grid">
                    <!-- Produtos serão carregados aqui -->
                </div>
            </section>

            <!-- Carrinho (Desktop) -->
            <aside class="carrinho-sidebar">
                <div class="carrinho-header">
                    <h3><i class="fas fa-shopping-cart"></i> Carrinho</h3>
                    <div class="subtotal" id="subtotal">R$ 0,00</div>
                </div>
                <div class="carrinho-items" id="carrinhoItems">
                    <!-- Itens do carrinho serão carregados aqui -->
                </div>
                <div class="carrinho-footer">
                    <div class="total-final">
                        <span>Total:</span>
                        <span id="totalVendaDesktop">R$ 0,00</span>
                    </div>
                    <div class="carrinho-actions">
                        <button id="btnFinalizarVenda" class="btn-primary" disabled>
                            <i class="fas fa-credit-card"></i> Finalizar Venda
                        </button>
                        <button id="btnCancelarVenda" class="btn-danger">
                            <i class="fas fa-times"></i> Cancelar
                        </button>
                    </div>
                </div>
            </aside>
        </main>

        <!-- Botão Carrinho Mobile -->
        <div class="carrinho-mobile-btn" id="btnAbrirCarrinho">
            <div class="carrinho-badge" id="carrinhoBadge">0</div>
            <i class="fas fa-shopping-cart"></i>
            <span class="carrinho-total" id="carrinhoTotalMobile">R$ 0,00</span>
        </div>

        <!-- Input Scanner (Escondido) -->
        <input type="text" id="scannerInput" class="scanner-input" autocomplete="off" inputmode="none">
    </div>

    <!-- Modal Finalizar Venda -->
    <div id="modalFinalizar" class="modal">
        <div class="modal-content finalizar-modal">
            <div class="modal-header">
                <h3><i class="fas fa-credit-card"></i> Finalizar Venda</h3>
                <button id="btnVoltar" class="btn-close">&times;</button>
            </div>
            <div class="resumo-venda">
                <h4>Resumo da Venda</h4>
                <div class="resumo-itens" id="resumoItens">
                    <!-- Itens do resumo serão carregados aqui -->
                </div>
                <div class="resumo-total">
                    <span>Total:</span>
                    <span id="totalModal">R$ 0,00</span>
                </div>
            </div>
            <div class="pagamento-section">
                <h4>Forma de Pagamento</h4>
                <div class="opcoes-pagamento">
                    <div class="opcao-pagamento selecionada" data-pagamento="pix">
                        <i class="fas fa-qrcode"></i>
                        <span>PIX</span>
                    </div>
                    <div class="opcao-pagamento" data-pagamento="credito">
                        <i class="fas fa-credit-card"></i>
                        <span>Cartão Crédito</span>
                    </div>
                    <div class="opcao-pagamento" data-pagamento="debito">
                        <i class="fas fa-credit-card"></i>
                        <span>Cartão Débito</span>
                    </div>
                    <div class="opcao-pagamento" data-pagamento="dinheiro">
                        <i class="fas fa-money-bill-wave"></i>
                        <span>Dinheiro</span>
                    </div>
                </div>
                <div class="instrucao-pagamento" id="instrucaoPagamentoFinal">
                    <p>Valor a pagar: <strong id="valorPagamentoFinal">R$ 0,00</strong></p>
                    <div class="instrucao-pix" style="display: none;">
                        <p>Apresente o QR Code para o cliente</p>
                    </div>
                    <div class="instrucao-cartao" style="display: none;">
                        <p>Insira/aponte o cartão na maquininha</p>
                    </div>
                    <div class="instrucao-dinheiro" style="display: none;">
                        <p>Informe o valor recebido</p>
                    </div>
                </div>
            </div>
            <div class="modal-actions">
                <button id="btnConfirmarVenda" class="btn-primary">
                    <i class="fas fa-check"></i> Confirmar Pagamento
                </button>
            </div>
        </div>
    </div>

    <!-- Modal Carrinho Mobile -->
    <div id="modalCarrinho" class="modal mobile-modal">
        <div class="modal-content carrinho-modal">
            <div class="modal-header">
                <h3><i class="fas fa-shopping-cart"></i> Carrinho <span id="carrinhoModalCount">(0 itens)</span></h3>
                <button id="btnFecharCarrinho" class="btn-close">&times;</button>
            </div>
            <div class="carrinho-modal-items" id="carrinhoModalItems">
                <!-- Itens do carrinho mobile serão carregados aqui -->
            </div>
            <div class="carrinho-modal-footer">
                <div class="carrinho-modal-totals">
                    <div class="carrinho-modal-subtotal">
                        <span>Subtotal:</span>
                        <span id="subtotalModal">R$ 0,00</span>
                    </div>
                    <div class="carrinho-modal-total">
                        <span>Total:</span>
                        <span id="totalVendaModal">R$ 0,00</span>
                    </div>
                </div>
                <div class="carrinho-modal-actions">
                    <button id="btnFinalizarVendaMobile" class="btn-primary">
                        <i class="fas fa-credit-card"></i> Finalizar Venda
                    </button>
                    <button id="btnCancelarVendaMobile" class="btn-danger">
                        <i class="fas fa-times"></i> Cancelar
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal Customizado (Interno) -->
    <div id="customModal" class="custom-modal" style="display:none;">
        <div class="custom-modal-content">
            <p id="customModalMessage"></p>
            <div class="custom-modal-buttons">
                <button id="customModalConfirm" class="btn-primary">Confirmar</button>
                <button id="customModalCancel" class="btn-danger">Cancelar</button>
            </div>
        </div>
    </div>

    <!-- Container para Toasts -->
    <div id="toastContainer"></div>

    <!-- Scripts -->
    <script type="module" src="js/caixa.js"></script>
    <script type="module" src="js/produtos.js"></script>
    <script type="module" src="js/carrinho.js"></script>
    <script type="module" src="js/pagamento.js"></script>
</body>
</html>